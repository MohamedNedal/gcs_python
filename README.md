GCS in Python
=============
[![DOI](https://zenodo.org/badge/297350666.svg)](https://zenodo.org/badge/latestdoi/297350666)

Python 3 implementation of the Graduated Cylindrical Shell model ([Thernisien, 2011](https://dx.doi.org/10.1088%2F0067-0049%2F194%2F2%2F33)).
Based on the existing IDL implementation in SolarSoft (`cmecloud.pro`, `shellskeleton.pro`).

The code in `gcs.py` provides the basic implementation of the GCS geometry, while the Qt-based GUI in `gcs_gui.py` uses
[SunPy](https://sunpy.org/) and Matplotlib to plot the model on top of coronagraph images provided by
[Helioviewer.org](https://www.helioviewer.org/).

![Screenshot](/img/screenshot.png?raw=true)

Note
----

This code is still in a quite early stage. It has been compared with the original IDL/SolarSoft version to verify the results, but only for a few case studies.
Please be careful when using it and compare to IDL when in doubt. If you find a bug or have suggestions for improvement, please notify me with a
GitHub [issue](https://github.com/johan12345/gcs_python/issues/new) or [Pull Request](https://github.com/johan12345/gcs_python/compare).

If you use this code in a publication, please cite it using [the DOI generated by Zenodo](https://zenodo.org/badge/latestdoi/297350666). I would also appreciate it if you [drop me an email](mailto:forstner@physik.uni-kiel.de) and tell me what you used it for :)

How to install and run the GUI
------------------------------
Python 3.7 or later is required.
```
# install GCS
pip3 install git+https://github.com/johan12345/gcs_python.git

# run GCS GUI, providing a date/time and the spacecraft to use
gcs_gui "2020-04-15 06:00" STA SOHO
```

Information on the available command line arguments for the GUI is given when you run the help option:
```shell script
gcs_gui -h
```

How to use the GCS geometry in your own plotting code
-----------------------------------------------------
Simply install GCS (as seen above) and use
```python
from gcs import gcs
```
to import the code from the GCS package. You can find some examples what you can do with it in the files
`sample.py` and `sample_sunpy.py`.

Development setup
-----------------
First, clone the git repository:
```shell script
git@github.com:johan12345/gcs_python.git
```

It is recommended to use a [virtual environment](https://docs.python.org/3/tutorial/venv.html) so that the
Python packages you install as dependencies of GCS don't interfere with your globally installed packages.
On some Linux distributions, the additional `python3-venv` package needs to be installed for this to work.

```shell script
python3 -m venv env
. env/bin/activate
```

Then, install the dependencies:
```shell script
# install requirements
python3 -m pip install --upgrade pip setuptools
pip3 install -r requirements.txt
```
